<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>

	<link rel="stylesheet"
		href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
		integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ"
		crossorigin="anonymous" />

	<title>Nuevo usuario</title>
	<Style>
.button {
	background-color: #4CAF50;
	border: none;
	color: white;
	padding: 16px 32px;
	text-align: center;
	text-decoration: none;
	display: inline-block;
	font-size: 16px;
	margin: 4px 2px;
	-webkit-transition-duration: 0.4s;
	transition-duration: 0.4s;
	cursor: pointer;
	border-radius: 50px;
	padding: 15px 40px;
	position: relative;
	bottom: 40px;
}
	
.button1 {
	background-color: #4CAF50;
	color: black;
	border: 2px solid #4CAF50;
}

.button1:hover {
	background-color: #4CAF50;
	color: white;

}

.button2 {
	background-color: #4CAF50;
	color: black;
	border: 2px solid #4CAF50;
}

.button2:hover {
	background-color: #4CAF50;
	color: white;
}
	
.dropbtn {
	background-color: #4CAF50;
	border: none;
	color: white;
	padding: 16px 32px;
	text-align: center;
	text-decoration: none;
	display: inline-block;
	font-size: 16px;
	margin: 4px 2px;
	-webkit-transition-duration: 0.4s;
	transition-duration: 0.4s;
	cursor: pointer;
	border-radius: 50px;
	padding: 15px 40px;
	position: relative;
	bottom: 40px;
}

.dropdown {
	position: relative;
	display: inline-block;
}

.dropdown-content {
	display: none;
	position: absolute;
	background-color: lightgreen;
	min-width: 200px;
	z-index: 1;
	border-radius: 25px;
}

.dropdown-content a {
	color: black;
	padding: 12px 16px;
	text-decoration: none;
	display: block;
}

.dropdown-content a:hover {
	background-color: white;
	border-radius: 50px;
}

.dropdown:hover .dropdown-content {
	display: block;
}

.dropdown:hover .dropbtn {
	background-color: grey;
}

.footer-distributed{
	background-color: #A8A8A8;
	box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.12);
	box-sizing: border-box;
	width: 100%;
	text-align: left;
	font: bold 16px sans-serif;

	padding: 20px 50px 5px 50px;
	margin-top: 70px;
}

.footer-distributed .footer-left,
.footer-distributed .footer-center,
.footer-distributed .footer-right{
	display: inline-block;
	vertical-align: top;
}

/* Footer left */

.footer-distributed .footer-left{
	width: 30%;
}

/* The company logo */

.footer-distributed h3{
	color:  #ffffff;
	font: normal 36px 'Cookie', cursive;
	margin-top: 25px;
}

.footer-distributed h3 span{
	color:  #88FF00;
}

/* Footer links */

.footer-distributed .footer-links{
	color:  #ffffff;
	margin: 20px 0 12px;
	padding: 0;
}

.footer-distributed .footer-links a{
	display:inline-block;
	line-height: 1.8;
	text-decoration: none;
	color:  inherit;
}

.footer-distributed .footer-company-name{
	color:  #8f9296;
	font-size: 14px;
	font-weight: normal;
	margin: 0;
}

/* Footer Center */

.footer-distributed .footer-center{
	width: 40%;
}

.footer-distributed .footer-center i{
	background-color:  #33383b;
	color: #ffffff;
	font-size: 25px;
	width: 38px;
	height: 38px;
	border-radius: 50%;
	text-align: center;
	line-height: 42px;
	margin: 10px 15px;
	vertical-align: middle;
}

.footer-distributed .footer-center i.fa-envelope{
	font-size: 17px;v
	line-height: 38px;
}

.footer-distributed .footer-center p{
	display: inline-block;
	color: #ffffff;
	vertical-align: middle;
	margin:0;
}

.footer-distributed .footer-center p span{
	display:block;
	font-weight: normal;
	font-size:14px;
	line-height:2;
}

.footer-distributed .footer-center p a{
	color:  #88FF00;
	text-decoration: none;;
}


/* Footer Right */

.footer-distributed .footer-right{
	width: 28%;
}

.footer-distributed .footer-company-about{
	line-height: 20px;
	color:  #92999f;
	font-size: 13px;
	font-weight: normal;
	margin: 0;
}

.footer-distributed .footer-company-about span{
	display: block;
	color:  #ffffff;
	font-size: 14px;
	font-weight: bold;
	margin-bottom: 20px;
}

.footer-distributed .footer-icons{
	margin-top: 25px;
}

.footer-distributed .footer-icons a{
	display: inline-block;
	width: 35px;
	height: 35px;
	cursor: pointer;
	background-color:  #33383b;
	border-radius: 2px;

	font-size: 20px;
	color: #ffffff;
	text-align: center;
	line-height: 35px;

	margin-right: 3px;
	margin-bottom: 5px;
}

@media (max-width: 880px) {

	.footer-distributed{
		font: bold 14px sans-serif;
	}

	.footer-distributed .footer-left,
	.footer-distributed .footer-center,
	.footer-distributed .footer-right{
		display: block;
		width: 100%;
		margin-bottom: 40px;
		text-align: center;
	}

	.footer-distributed .footer-center i{
		margin-left: 0;
	}

}
</Style>

</h:head>

<h:body style="background-color: rgb(250, 250, 250)">
	
	<h:panelGroup rendered="#{!(loginBean.userType eq 'A' or loginBean.userType eq 'O')}">
		<center>
			<a href="../index.xhtml">Inicio</a>
		</center>	
	</h:panelGroup>
	
	<h:panelGroup rendered="#{loginBean.userType eq 'A' or loginBean.userType eq 'O'}"> 
	
	<h:panelGroup layout="block" 
		style="border-color: rgb(0, 0, 0) rgb(0, 0, 0) rgb(0, 0, 0) rgb(0, 0, 0); background-color: rgb(250, 250, 250); border-radius: 0px">
		<a href="../index.xhtml"><h:graphicImage library="resources" name="Logo.png"
			style="height: 90px; width: 110px; position: relative; left: 50px;" /></a>

		<div class="dropdown" style="left: 77%">
		
			<button class="dropbtn">
				<p:outputLabel rendered="#{loginBean.userType eq 'A'}" value="Administrador " ><i class="fas fa-user-cog"/></p:outputLabel>
				<p:outputLabel rendered="#{loginBean.userType eq 'O'}" value="Owner " ><i class="fas fa-user-tie"/></p:outputLabel>
			</button>
			
			<div class="dropdown-content">
				<a href="../sesion/MiCuenta.xhtml">Mi Cuenta</a>
				<a href="../obras/ListaDeCompras.xhtml?faces-redirect=true">Mis compras</a>
				<a href="../administrador/ListaDeUsuarios.xhtml">Usuarios</a> 
				<a href="../administrador/ListaDeObras.xhtml">Obras</a> 
				<a href="../administrador/ListaDeExposiciones.xhtml">Exposiciones</a>	
				<a href="../administrador/ListaDeAuditoria.xhtml">Auditorías</a>	
				<a href="../sesion/CerrarSesion.xhtml">Cerrar sesión</a>
			</div>
			
		</div>


	</h:panelGroup>

	<h:panelGroup layout="block" style="margin: 20px 0px 0px 0px">
		
		<h:form>
			<p:growl id="messages" style="width: 200px" />
			<p:menubar toggleEvent="">
				
					<p:menuitem value="Inicio" url="../index.xhtml" />
					<p:menuitem value="Obras" url="../obras/PaginaObras.xhtml" />
					<p:menuitem value="Exposiciones" url="../obras/Exposicion.xhtml" />
					<p:menuitem value="Información" url="../obras/Informacion.xhtml" />
				
			</p:menubar>
			</h:form>


		</h:panelGroup>

<center>
  <h:form style="padding-top: 70px">
    <p:panel header="Registro de usuario" style="width:500px">
      <h:panelGrid columns="2" cellpadding="6">
        <h:outputLabel for="username" value="Usuario" />
        <p:inputText requiredMessage="Ingrese el usuario"
		validatorMessage="Longitud de entre 5 y 8 caracteres. Solo números o letras." placeholder="" value="#{usuarioBean.usuario.userName}" id="username" required="true" label="username" >
        <f:validateRegex pattern="^([a-zA-Z0-9]){5,8}$"/>
        <p:message for="username"/>
        </p:inputText>
          <h:outputLabel for="tipo" value="Tipo de usuario"/>
           <h:panelGrid columns="" style="margin-bottom:10px" cellpadding="5">
        <p:selectOneRadio id="tipoUsuario" value="#{usuarioBean.usuario.userType}" unselectable="true" required="true"> 
            <f:selectItem itemLabel="Administrador" itemValue="A" />
            <f:selectItem itemLabel="Usuario" itemValue="U" />
        </p:selectOneRadio>
    </h:panelGrid>
        <h:outputLabel for="nombre" value="Nombre completo" />
        <p:inputText requiredMessage="Ingrese el nombre"
		validatorMessage="Solo letras. No espacio inicial." placeholder="" value="#{usuarioBean.usuario.fullName}" id="nombre" required="true" label="nombre" >
        <f:validateRegex pattern="^[áéíóúÁÉÍÓÚñÑa-zA-Z][áéíóúÁÉÍÓÚñÑa-zA-Z ]*$"/>
        <p:message for="nombre"/>
        </p:inputText>
        
        <h:outputLabel for="correo" value="Correo electronico" />
        <p:inputText requiredMessage="Ingrese el correo electrónico"
		validatorMessage="Solo números o letras." placeholder="" value="#{usuarioBean.usuario.emailAddress}" id="correo" required="true" label="correo" >
        <f:validateRegex pattern="^[a-zA-Z0-9][_A-Za-z0-9-+.]+(\.[_A-Za-z0-9]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$"/>
        <p:message for="correo"/>
        </p:inputText>
        <h:outputLabel for="telefono" value="Telefono" />
        <p:inputText requiredMessage="Ingrese número celular"
		validatorMessage="Longitud de 10 caracteres. Solo números. No letras ni carácteres especiales. " value="#{usuarioBean.usuario.phoneNumber}" placeholder="" id="telefono" required="true" label="telefono" >
        <f:validateRegex pattern="^3[0-9]{9,9}$"/>
        <p:message for="telefono"/>
        </p:inputText>
        <f:facet name="footer">
        <center>
          
          <p:growl showDetail="true"/>
          
           <f:loadBundle basename="com.gsa.properties.configGmail" var="config" />
          <p:commandButton id="ingresarUsuario" value="Registrar" ajax="false" action="#{usuarioBean.registroNuevoUsuario()}" actionListener="#{auditoriaBean.agregarAuditoria()}" >
          			<f:param name="correoGmail" value="#{config.correoGmail}" />
					<f:param name="claveGmail" value="#{config.claveGmail}" />
					<f:param name="asuntoCorreo" value="#{config.asuntoCorreo}" />
					<f:param name="mensajeCorreo" value="#{config.mensajeCorreo}" />
          
          			<f:param name="idUsuario" value="#{loginBean.datosLogueados.id}" />
					<f:param name="operationCrud" value="C" />
					<f:param name="tableName" value="U" />
					<f:param name="idModif" value="#{usuarioBean.usuarioAgregar()}" />
          </p:commandButton>
          
        </center>
        </f:facet>
      </h:panelGrid>
    </p:panel>
  </h:form>
  </center>

  </h:panelGroup>
  
  <footer class="footer-distributed">

			<div class="footer-left">
			
			<h3>Sophy <span>Art</span></h3>
			
			</div>

			<div class="footer-center">

				<div>
					<i class="fas fa-map-marker-alt"></i>
					<p><span>No 131 A, Carrera 9 # 131 A 2</span>Bogotá D.C.</p>
				</div>

				<div>
					<i class="far fa-envelope"></i>
					<p><a href="mailto:gsapresidente@gmail.com">gsapresidente@gmail.com</a></p>
				</div>

			</div>

			<div class="footer-right">

				<p class="footer-company-about">
					<span>Sophy Art</span>
				</p>

				<div class="footer-icons">

					<a href="https://www.facebook.com/Sophy-Art-2406743689555018/?modal=admin_todo_tour"><i class="fab fa-facebook-f"></i></a>
					<a href="#"><i class="fab fa-twitter"></i></a>
					<a href="https://www.instagram.com/galeriasophyart/?hl=es-la"><i class="fab fa-instagram"></i></a>

				</div>

			</div>

		</footer>
 
</h:body>
</html>